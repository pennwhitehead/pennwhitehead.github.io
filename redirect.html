<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting…</title>
  </head>
  <body>
    <h2>Redirecting...</h2>
    <script>
      const params = new URLSearchParams(window.location.search);
      const code = params.get("code");

      if (code) {
        fetch("http://127.0.0.1:3000/auth-complete?code=" + encodeURIComponent(code))
          .then(() => {
            document.body.innerHTML = "<p>✅ All set! You can now close this window.</p>";
          })
          .catch((err) => {
            document.body.innerHTML = "<p>⚠️ Couldn't connect to your app. Is it running?</p>";
            console.error(err);
          });
      } else {
        document.body.innerHTML = "<p>⚠️ No code found in URL.</p>";
      }
    </script>
  </body>
</html>
